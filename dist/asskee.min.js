!function(e,a){if("object"==typeof exports&&"object"==typeof module)module.exports=a(require("events"),require("string_decoder"));else if("function"==typeof define&&define.amd)define(["events","string_decoder"],a);else{var r="object"==typeof exports?a(require("events"),require("string_decoder")):a(e.events,e.string_decoder);for(var t in r)("object"==typeof exports?exports:e)[t]=r[t]}}(this,function(e,a){return function(e){function a(t){if(r[t])return r[t].exports;var n=r[t]={exports:{},id:t,loaded:!1};return e[t].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}var r={};return a.m=e,a.c=r,a.p="",a(0)}([function(e,a,r){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}var n=r(2),s=t(n);e.exports=s.default},function(e,a){e.exports=require("events")},function(e,a,r){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function n(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function s(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?e:a}function o(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function e(e,a){for(var r=0;r<a.length;r++){var t=a[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(a,r,t){return r&&e(a.prototype,r),t&&e(a,t),a}}(),c=r(3),f=t(c),u=r(1),m=function(e){function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,a);var r=s(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return r.width=e.width||32,r.height=e.height||8,r.border=e.border||!1,r.separator=e.separator||"\n",r.in=process.stdin,r.out=process.stdout,r.in.setRawMode(!0),r.in.resume(),(0,f.default)(r.in),r.in.on("keypress",r.keypressHandler.bind(r)),r}return o(a,e),i(a,[{key:"clear",value:function(){this.out.write("c")}},{key:"hideCursor",value:function(){this.out.write("[?25l")}},{key:"showCursor",value:function(){this.out.write("[?25h")}},{key:"keypressHandler",value:function(e,a){a&&a.ctrl&&"c"===a.name&&(this.clear(),this.showCursor(),this.in.pause()),this.emit("keypress",e,a)}},{key:"write",value:function(e){var a=this;if("string"==typeof e){var r=e.split(this.separator);r=r.splice(0,this.height),r=r.map(function(e){return e.substr(0,a.width)}),this.out.write(r.join(this.separator))}}}]),a}(u);a.default=m},function(e,a,r){function t(e){function a(r){if(i(e,"keypress")>0){var n=e._keypressDecoder.write(r);n&&s(e,n)}else e.removeListener("data",a),e.on("newListener",t)}function t(r){"keypress"==r&&(e.on("data",a),e.removeListener("newListener",t))}if(!n(e)){var o=r(4).StringDecoder;e._keypressDecoder=new o("utf8"),i(e,"keypress")>0?e.on("data",a):e.on("newListener",t)}}function n(e){var a=!!e._keypressDecoder;return a||(e.listeners("data").slice(0).forEach(function(a){"onData"==a.name&&/emitKey/.test(a.toString())&&e.removeListener("data",a)}),e.listeners("newListener").slice(0).forEach(function(a){"onNewListener"==a.name&&/keypress/.test(a.toString())&&e.removeListener("newListener",a)})),a}function s(e,a){var r,t,n={name:void 0,ctrl:!1,meta:!1,shift:!1};if(Buffer.isBuffer(a)&&(a[0]>127&&void 0===a[1]?(a[0]-=128,a=""+a.toString(e.encoding||"utf-8")):a=a.toString(e.encoding||"utf-8")),n.sequence=a,"\r"===a)n.name="return";else if("\n"===a)n.name="enter";else if("\t"===a)n.name="tab";else if("\b"===a||""===a||""===a||"\b"===a)n.name="backspace",n.meta=""===a.charAt(0);else if(""===a||""===a)n.name="escape",n.meta=2===a.length;else if(" "===a||" "===a)n.name="space",n.meta=2===a.length;else if(a<="")n.name=String.fromCharCode(a.charCodeAt(0)+"a".charCodeAt(0)-1),n.ctrl=!0;else if(1===a.length&&a>="a"&&a<="z")n.name=a;else if(1===a.length&&a>="A"&&a<="Z")n.name=a.toLowerCase(),n.shift=!0;else if(t=c.exec(a))n.name=t[1].toLowerCase(),n.meta=!0,n.shift=/^[A-Z]$/.test(t[1]);else if(t=f.exec(a)){var o=(t[1]||"")+(t[2]||"")+(t[4]||"")+(t[6]||""),i=(t[3]||t[5]||1)-1;switch(n.ctrl=!!(4&i),n.meta=!!(10&i),n.shift=!!(1&i),n.code=o,o){case"OP":n.name="f1";break;case"OQ":n.name="f2";break;case"OR":n.name="f3";break;case"OS":n.name="f4";break;case"[11~":n.name="f1";break;case"[12~":n.name="f2";break;case"[13~":n.name="f3";break;case"[14~":n.name="f4";break;case"[[A":n.name="f1";break;case"[[B":n.name="f2";break;case"[[C":n.name="f3";break;case"[[D":n.name="f4";break;case"[[E":n.name="f5";break;case"[15~":n.name="f5";break;case"[17~":n.name="f6";break;case"[18~":n.name="f7";break;case"[19~":n.name="f8";break;case"[20~":n.name="f9";break;case"[21~":n.name="f10";break;case"[23~":n.name="f11";break;case"[24~":n.name="f12";break;case"[A":n.name="up";break;case"[B":n.name="down";break;case"[C":n.name="right";break;case"[D":n.name="left";break;case"[E":n.name="clear";break;case"[F":n.name="end";break;case"[H":n.name="home";break;case"OA":n.name="up";break;case"OB":n.name="down";break;case"OC":n.name="right";break;case"OD":n.name="left";break;case"OE":n.name="clear";break;case"OF":n.name="end";break;case"OH":n.name="home";break;case"[1~":n.name="home";break;case"[2~":n.name="insert";break;case"[3~":n.name="delete";break;case"[4~":n.name="end";break;case"[5~":n.name="pageup";break;case"[6~":n.name="pagedown";break;case"[[5~":n.name="pageup";break;case"[[6~":n.name="pagedown";break;case"[7~":n.name="home";break;case"[8~":n.name="end";break;case"[a":n.name="up",n.shift=!0;break;case"[b":n.name="down",n.shift=!0;break;case"[c":n.name="right",n.shift=!0;break;case"[d":n.name="left",n.shift=!0;break;case"[e":n.name="clear",n.shift=!0;break;case"[2$":n.name="insert",n.shift=!0;break;case"[3$":n.name="delete",n.shift=!0;break;case"[5$":n.name="pageup",n.shift=!0;break;case"[6$":n.name="pagedown",n.shift=!0;break;case"[7$":n.name="home",n.shift=!0;break;case"[8$":n.name="end",n.shift=!0;break;case"Oa":n.name="up",n.ctrl=!0;break;case"Ob":n.name="down",n.ctrl=!0;break;case"Oc":n.name="right",n.ctrl=!0;break;case"Od":n.name="left",n.ctrl=!0;break;case"Oe":n.name="clear",n.ctrl=!0;break;case"[2^":n.name="insert",n.ctrl=!0;break;case"[3^":n.name="delete",n.ctrl=!0;break;case"[5^":n.name="pageup",n.ctrl=!0;break;case"[6^":n.name="pagedown",n.ctrl=!0;break;case"[7^":n.name="home",n.ctrl=!0;break;case"[8^":n.name="end",n.ctrl=!0;break;case"[Z":n.name="tab",n.shift=!0;break;default:n.name="undefined"}}else if(a.length>1&&""!==a[0])return void Array.prototype.forEach.call(a,function(a){s(e,a)});if("[M"==n.code){n.name="mouse";var a=n.sequence,u=a.charCodeAt(3);n.x=a.charCodeAt(4)-32,n.y=a.charCodeAt(5)-32,n.scroll=0,n.ctrl=!!(16&u),n.meta=!!(8&u),n.shift=!!(4&u),n.release=3===(3&u),64&u&&(n.scroll=1&u?1:-1),n.release||n.scroll||(n.button=3&u)}void 0===n.name&&(n=void 0),1===a.length&&(r=a),n&&"mouse"==n.name?e.emit("mousepress",n):(n||r)&&e.emit("keypress",r,n)}var o=r(1).EventEmitter,a=e.exports=t;a.enableMouse=function(e){e.write("[?1000h")},a.disableMouse=function(e){e.write("[?1000l")};var i=o.listenerCount;i||(i=function(e,a){return e.listeners(a).length});var c=/^(?:\x1b)([a-zA-Z0-9])$/,f=/^(?:\x1b+)(O|N|\[|\[\[)(?:(\d+)(?:;(\d+))?([~^$])|(?:1;)?(\d+)?([a-zA-Z]))/},function(e,a){e.exports=require("string_decoder")}])});